<div class="nav-panel">
  <a (click)="deactivate()"><span class="back-btn fa fa-angle-left"></span>Назад</a>
</div>
<figure>
  <img [src]="product.getImageSrc()" alt="">
</figure>
<div class="product-info">
  <h3>{{ product.getTitle() }}</h3>
  <div class="product-description">
    <p>{{ product.getDescription() }}</p>
  </div>
  <ul appClickStopPropagation class="product-options" *ngIf="product.getOptions() as options">
    <li *ngFor="let option of options">
      <strong>{{ option.title }}:</strong>
      <a (click)="openOptions(option)">{{ getOptionValue(option)?.title || 'Не выбрано' }}</a>
    </li>
  </ul>
  <div class="option-overlay" *ngIf="activeOption">
    <div appClickStopPropagation class="option-wrapper">
      <h3>{{ activeOption.title }}</h3>
      <div class="values-wrapper">
        <ul>
          <li *ngIf="!activeOption.required" [class.active]="activeOption.value === null">
            <a (click)="activeOption.value = null">Не выбрано</a>
          </li>
          <li *ngFor="let value of activeOption.values; index as i"
              [class.active]="activeOption.value === i">
            <a (click)="product.setOptionValue(activeOption, i); closeOptions()">{{ value.title }}</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="product-quantity-container" app-quantity-control [product]="product"></div>
  <div class="product-controls">
    <div class="total-cost">
      <p class="price-range">от <strong>{{ product.getMinPrice() | number }}&nbsp;&#8381;/кг</strong></p>
      <p class="total-cost">
        <strong>{{ product.getTotalCost() | number }}&nbsp;&#8381;</strong>
        <ng-container *ngIf="product.getInputType() === inputType.count">
          ({{ product.getWeight() / 1000 | number }}&nbsp;кг)
        </ng-container>
      </p>
    </div>
    <button class="rounded-button choose-btn" (click)="activate()">Выбрать</button>
    <button class="rounded-button add-to-cart-btn" (click)="addToCart(product)">В корзину</button>
  </div>
</div>
